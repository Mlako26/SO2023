mutex = sem(1)
mutex1 = sem(1)
int buscando = 0
bool modificando = false
bool quieroModificar = false

searchers(i) {
    mutex1.wait()
    mutex.wait()
    buscando++
    mutex.signal()
    mutex1.signal()

    search(i)

    mutex.wait()
    buscando--
    if (quieroModificar && !buscando) listo.signal()
    mutex.signal()

}

inserters(i) {
    mutex1.wait()
    quieroModificar = true
    if (buscando > 0) listo.wait()
    insert(i)
    mutex1.signal()
}

deleters(i) {
    mutex1.wait()
    quieroModificar = true
    if (buscando > 0) listo.wait()
    delete(i)
    quieroModificar = false;
    mutex1.signal()
}